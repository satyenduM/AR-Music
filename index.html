<!DOCTYPE html>
<html>
<head>
  <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.4.0/dist/aframe-extras.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.min.js" integrity="sha512-6+YN/9o9BWrk6wSfGxQGpt3EUK6XeHi6yeHV+TYD2GR0Sj/cggRpXr1BrAQf0as6XslxomMUxXp2vIl+fv0QRA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>

<body style="margin: 0; overflow: hidden;">

<a-scene embedded arjs="detectionMode: mono_and_matrix; matrixCodeType: 3x3">
  <a-assets>
    <img id="drumsImage" src="https://example.com/assets/drums.png"/>
    <img id="guitarImage" src="https://example.com/assets/guitar.png"/>
    <img id="micImage" src="https://example.com/assets/mic.png"/>
    <img id="pianoImage" src="https://example.com/assets/piano.png"/>
  </a-assets>

  <a-marker id="drumsMarker" type="barcode" value="0">
    <a-image src="#drumsImage" rotation="90 0 0" position="0 0 0"></a-image>
  </a-marker>

  <a-marker id="guitarMarker" type="barcode" value="1">
    <a-image src="#guitarImage" rotation="90 0 0" position="0 0 0"></a-image>
  </a-marker>

  <a-marker id="micMarker" type="barcode" value="2">
    <a-image src="#micImage" rotation="90 0 0" position="0 0 0"></a-image>
  </a-marker>

  <a-marker id="pianoMarker" type="barcode" value="3">
    <a-image src="#pianoImage" rotation="90 0 0" position="0 0 0"></a-image>
  </a-marker>

  <a-entity camera></a-entity>
</a-scene>

<script>
  let guitar = new Howl({
    src: ['https://example.com/audio/guitar.mp3'],
    mute: true
  });

  let mic = new Howl({
    src: ['https://example.com/audio/mic.mp3'],
    mute: true
  });

  let drums = new Howl({
    src: ['https://example.com/audio/drums.mp3'],
    mute: true
  });

  let piano = new Howl({
    src: ['https://example.com/audio/piano.mp3'],
    mute: true
  });

  // Function to unmute and play audio after user interaction
  function startAudio() {
    guitar.mute(true);
    mic.mute(true);
    drums.mute(true);
    piano.mute(true);

    guitar.play();
    mic.play();
    drums.play();
    piano.play();

    window.removeEventListener('touchstart', startAudio, false);
  }

  window.addEventListener('touchstart', startAudio, false);

  window.onload = function () {
    let guitarMarker = document.getElementById('guitarMarker');
    guitarMarker.addEventListener('markerFound', function () {
      guitar.mute(false);
    });
    guitarMarker.addEventListener('markerLost', function () {
      guitar.mute(true);
    });

    let micMarker = document.getElementById('micMarker');
    micMarker.addEventListener('markerFound', function () {
      mic.mute(false);
    });
    micMarker.addEventListener('markerLost', function () {
      mic.mute(true);
    });

    let pianoMarker = document.getElementById('pianoMarker');
    pianoMarker.addEventListener('markerFound', function () {
      piano.mute(false);
    });
    pianoMarker.addEventListener('markerLost', function () {
      piano.mute(true);
    });

    let drumsMarker = document.getElementById('drumsMarker');
    drumsMarker.addEventListener('markerFound', function () {
      drums.mute(false);
    });
    drumsMarker.addEventListener('markerLost', function () {
      drums.mute(true);
    });
  }
</script>

</body>
</html>
